Create a tree of checkbox's where each checkbox can have multiple children.
A checkbox has 3 states, checked, unchecked, checked children (muted gray)
Checking a parent checks all of the children
Unchecking a parent does not effect the children - but does check if it has check children to be marked as muted